(this["webpackJsonpapp-react-vuelos"]=this["webpackJsonpapp-react-vuelos"]||[]).push([[0],{37:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(0),r=n.n(s),o=n(19),i=n.n(o),c=(n(46),n(9)),l=n(10),h=n(12),d=n(11),u=(n(47),n(17)),j=n(7),b=n.p+"static/media/airplane.6f93506a.png",O=(n(48),n(62)),p=n(39),m=n(58),v=(n(49),function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={codigo:"",origen:"",destino:""},a.handleInputChange=a.handleInputChange.bind(Object(j.a)(a)),a.handleSubmitSearch=a.handleSubmitSearch.bind(Object(j.a)(a)),a.handleSubmitAll=a.handleSubmitAll.bind(Object(j.a)(a)),a}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(u.a)({},a,n))}},{key:"handleSubmitSearch",value:function(e){e.preventDefault(),this.props.onSearch(this.state)}},{key:"handleSubmitAll",value:function(e){var t=this;this.setState({codigo:"",origen:"",destino:""},(function(){t.props.onSearch(t.state)})),e.preventDefault()}},{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsxs)("header",{className:"Header",children:[Object(a.jsx)("img",{src:b,className:"App-logo",alt:"logo"}),Object(a.jsx)("p",{children:"Panel de administraci\xf3n vuelos"}),Object(a.jsxs)("div",{className:"SearchPanel",children:[Object(a.jsx)(O.a,{onSubmit:this.handleSubmitSearch,children:Object(a.jsxs)(O.a.Row,{children:[Object(a.jsx)(p.a,{children:Object(a.jsx)(O.a.Control,{placeholder:"C\xf3digo",name:"codigo",value:this.state.codigo,onChange:this.handleInputChange})}),Object(a.jsx)(p.a,{children:Object(a.jsx)(O.a.Control,{placeholder:"Origen",name:"origen",value:this.state.origen,onChange:this.handleInputChange})}),Object(a.jsx)(p.a,{children:Object(a.jsx)(O.a.Control,{placeholder:"Destino",name:"destino",value:this.state.destino,onChange:this.handleInputChange})}),Object(a.jsx)(m.a,{variant:"primary",type:"submit",children:"Buscar"})]})}),Object(a.jsx)("hr",{}),Object(a.jsx)(O.a,{onSubmit:this.handleSubmitAll,children:Object(a.jsx)(O.a.Row,{children:Object(a.jsx)(m.a,{className:"w-100",variant:"primary",type:"submit",children:"Mostrar todos los vuelos"})})})]})]})})}}]),n}(r.a.Component)),x=n(63),g=n(60),f=n(59),C=n(20),S=n(16),y=(n(37),n(61)),I=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={isOpen:!1,codigo:"",origen:"",destino:"",fecha:(new Date).toISOString().split("T")[0],hora:"",plazas:"",plazasLibres:""},a.handleInputChange=a.handleInputChange.bind(Object(j.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(j.a)(a)),a}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(u.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.insertVuelo(this.state)}},{key:"setIsOpen",value:function(e){this.setState({isOpen:e})}},{key:"insertVuelo",value:function(e){var t=this,n=new Headers,a=e;a.fecha=new Date(a.fecha).getTime(),a.plazas_libres=a.plazas,delete a.isOpen;var s={method:"POST",headers:n,mode:"cors",cache:"default",body:JSON.stringify(a)},r=new Request("http://localhost/vuelosapi/",s);fetch(r).then((function(e){return e.json()})).then((function(e){e.success?t.props.onAdded(a):t.props.onError("El servidor respondi\xf3 con un error: "+e.error),t.setState({isOpen:!1})}),(function(e){t.props.onError("Se produjo un error al conectar con el servidor: "+e),t.setState({isOpen:!1,error:e})}))}},{key:"render",value:function(){var e=this,t=this.state.isOpen;return Object(a.jsxs)(y.a,{show:t,onHide:function(){e.setIsOpen(!1)},children:[Object(a.jsx)(y.a.Header,{closeButton:!0,children:Object(a.jsx)(y.a.Title,{children:"Insertar vuelo"})}),Object(a.jsx)(y.a.Body,{children:this.formJSX()})]})}},{key:"formJSX",value:function(){return Object(a.jsxs)(O.a,{onSubmit:this.handleSubmit,children:[Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Codigo"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"codigo",value:this.state.codigo,onChange:this.handleInputChange,required:!0})})]}),Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Origen"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"origen",value:this.state.origen,onChange:this.handleInputChange,required:!0})})]}),Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Destino"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"destino",value:this.state.destino,onChange:this.handleInputChange,required:!0})})]}),Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Fecha"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"fecha",value:this.state.fecha,onChange:this.handleInputChange,type:"date",required:!0})})]}),Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Hora"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"hora",value:this.state.hora,onChange:this.handleInputChange,required:!0})})]}),Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Plazas"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"plazas",value:this.state.plazas,onChange:this.handleInputChange,type:"number",required:!0})})]}),Object(a.jsx)(O.a.Row,{children:Object(a.jsx)(m.a,{className:"w-100",variant:"primary",type:"submit",children:"Insertar"})})]})}}]),n}(r.a.Component),k=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={isOpen:!1,codigo:""},a.handleInputChange=a.handleInputChange.bind(Object(j.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(j.a)(a)),a}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(u.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.borrarVuelo(this.state)}},{key:"setIsOpen",value:function(e,t){t?this.setState({isOpen:e,codigo:t}):this.setState({isOpen:e})}},{key:"borrarVuelo",value:function(e){var t=this,n=new Headers,a=e;delete a.isOpen;var s={method:"DELETE",headers:n,mode:"cors",cache:"default",body:JSON.stringify(a)},r=new Request("http://localhost/vuelosapi/",s);fetch(r).then((function(e){return e.json()})).then((function(e){e.success?t.props.onDeleted(a):t.props.onError("El servidor respondi\xf3 con un error: "+e.error),t.setState({isOpen:!1})}),(function(e){t.props.onError("Se produjo un error al conectar con el servidor: "+e),t.setState({isOpen:!1,error:e})}))}},{key:"render",value:function(){var e=this,t=this.state.isOpen;return Object(a.jsxs)(y.a,{show:t,onHide:function(){e.setIsOpen(!1)},children:[Object(a.jsx)(y.a.Header,{closeButton:!0,children:Object(a.jsx)(y.a.Title,{children:"Borrar vuelo"})}),Object(a.jsx)(y.a.Body,{children:this.formJSX()})]})}},{key:"formJSX",value:function(){return Object(a.jsxs)(O.a,{onSubmit:this.handleSubmit,children:[Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Codigo"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"codigo",value:this.state.codigo,onChange:this.handleInputChange,required:!0})})]}),Object(a.jsx)(O.a.Row,{children:Object(a.jsx)(m.a,{className:"w-100",variant:"danger",type:"submit",children:"Borrar"})})]})}}]),n}(r.a.Component),E=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={isOpen:!1,codigo:"",nuevo_codigo:"",origen:"",destino:"",fecha:(new Date).toISOString().split("T")[0],hora:"",plazas:"",plazas_libres:""},a.handleInputChange=a.handleInputChange.bind(Object(j.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(j.a)(a)),a}return Object(l.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(u.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.editarVuelo(this.state)}},{key:"setIsOpen",value:function(e,t){t?this.setState({isOpen:e,codigo:t.codigo,nuevo_codigo:t.codigo,origen:t.origen,destino:t.destino,fecha:t.fecha,hora:t.hora,plazas:t.plazas,plazas_libres:t.plazasLibres}):this.setState({isOpen:e})}},{key:"editarVuelo",value:function(e){var t=this,n=new Headers,a=e;a.fecha=new Date(a.fecha).getTime(),delete a.isOpen;var s={method:"PUT",headers:n,mode:"cors",cache:"default",body:JSON.stringify(a)},r=new Request("http://localhost/vuelosapi/",s);fetch(r).then((function(e){return e.json()})).then((function(e){e.success?t.props.onEdited(a):t.props.onError("El servidor respondi\xf3 con un error: "+e.error),t.setState({isOpen:!1})}),(function(e){t.props.onError("Se produjo un error al conectar con el servidor: "+e),t.setState({isOpen:!1,error:e})}))}},{key:"render",value:function(){var e=this,t=this.state.isOpen;return Object(a.jsxs)(y.a,{show:t,onHide:function(){e.setIsOpen(!1)},children:[Object(a.jsx)(y.a.Header,{closeButton:!0,children:Object(a.jsx)(y.a.Title,{children:"Editar vuelo"})}),Object(a.jsx)(y.a.Body,{children:this.formJSX()})]})}},{key:"formJSX",value:function(){return Object(a.jsxs)(O.a,{onSubmit:this.handleSubmit,children:[Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Codigo"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"codigo",value:this.state.codigo,onChange:this.handleInputChange,required:!0})})]}),Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Nuevo codigo"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"nuevo_codigo",value:this.state.nuevo_codigo,onChange:this.handleInputChange,required:!0})})]}),Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Origen"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"origen",value:this.state.origen,onChange:this.handleInputChange,required:!0})})]}),Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Destino"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"destino",value:this.state.destino,onChange:this.handleInputChange,required:!0})})]}),Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Fecha"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"fecha",value:this.state.fecha,onChange:this.handleInputChange,type:"date",required:!0})})]}),Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Hora"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"hora",value:this.state.hora,onChange:this.handleInputChange,required:!0})})]}),Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Plazas"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"plazas",value:this.state.plazas,onChange:this.handleInputChange,type:"number",required:!0})})]}),Object(a.jsxs)(O.a.Group,{as:f.a,children:[Object(a.jsx)(O.a.Label,{column:!0,sm:"2",children:"Plazas libres"}),Object(a.jsx)(p.a,{sm:"10",children:Object(a.jsx)(O.a.Control,{name:"plazas_libres",value:this.state.plazas_libres,onChange:this.handleInputChange,type:"number",required:!0})})]}),Object(a.jsx)(O.a.Row,{children:Object(a.jsx)(m.a,{className:"w-100",variant:"warning",type:"submit",children:"Editar"})})]})}}]),n}(r.a.Component),w=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={error:null,isEmpty:!0,isLoaded:!1,items:[]},a.onInsertClicked=a.onInsertClicked.bind(Object(j.a)(a)),a.onEditClicked=a.onEditClicked.bind(Object(j.a)(a)),a.onDeleteClicked=a.onDeleteClicked.bind(Object(j.a)(a)),a.onVueloInserted=a.onVueloInserted.bind(Object(j.a)(a)),a.onVueloDeleted=a.onVueloDeleted.bind(Object(j.a)(a)),a.onVueloEdited=a.onVueloEdited.bind(Object(j.a)(a)),a.showError=a.showError.bind(Object(j.a)(a)),a}return Object(l.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.fetchVuelos(e)}},{key:"fetchVuelos",value:function(e){var t=this;console.log("Fetching...");var n,a={method:"GET",headers:new Headers,mode:"cors",cache:"default"};if(e&&e.search){var s=JSON.stringify(e.search);n=new Request("http://localhost/vuelosapi/?search="+encodeURIComponent(s),a)}else n=new Request("http://localhost/vuelosapi/",a);fetch(n).then((function(e){return e.json()})).then((function(e){e.success?t.setState({isLoaded:!0,isEmpty:!1,vuelos:e.vuelos,error:null}):t.setState({isLoaded:!0,isEmpty:!1,error:"El servidor respondi\xf3 con un c\xf3digo de error. "+e.error})}),(function(e){t.setState({isLoaded:!0,isEmpty:!1,error:"No se pudo contactar con el servidor http://localhost/vuelosapi/. "+e.message})}))}},{key:"onVueloInserted",value:function(e){e.plazasLibres=e.plazas_libres,e.fecha=new Date(e.fecha).toISOString().split("T")[0];var t=this.state.vuelos;t.push(e),this.setState({info:"Vuelo ".concat(e.codigo," insertado correctamente"),vuelos:t})}},{key:"onVueloDeleted",value:function(e){var t=this.state.vuelos.filter((function(t){return t.codigo!==e.codigo}));this.setState({info:"Vuelo ".concat(e.codigo," borrado correctamente"),vuelos:t})}},{key:"onVueloEdited",value:function(e){e.plazasLibres=e.plazas_libres,e.fecha=new Date(e.fecha).toISOString().split("T")[0];var t=this.state.vuelos,n=[t.findIndex((function(t){return t.codigo===e.codigo}))];e.codigo=e.nuevo_codigo,t[n]=e,this.setState({info:"Vuelo ".concat(e.codigo," editado correctamente"),vuelos:t})}},{key:"showError",value:function(e){this.setState({info:e})}},{key:"onInsertClicked",value:function(){this.refs.insertModal.setIsOpen(!0)}},{key:"onDeleteClicked",value:function(e){this.refs.deleteModal.setIsOpen(!0,e.codigo)}},{key:"onEditClicked",value:function(e){this.refs.editModal.setIsOpen(!0,e)}},{key:"render",value:function(){var e,t=this,n=this.state,s=n.error,r=n.isEmpty,o=n.isLoaded,i=n.vuelos,c=n.info;return c&&(e=Object(a.jsx)(x.a,{className:"w-100 text-center mt-3",variant:"secondary",children:c})),r?Object(a.jsx)(a.Fragment,{}):s?Object(a.jsx)(x.a,{className:"w-100 text-center mt-3",variant:"danger",children:s.message||s}):o?null==i?Object(a.jsx)(x.a,{className:"w-100 text-center mt-3",variant:"warning",children:"No se han encontrado vuelos"}):Object(a.jsxs)(g.a,{children:[Object(a.jsx)(I,{ref:"insertModal",onAdded:this.onVueloInserted,onError:this.showError}),Object(a.jsx)(k,{ref:"deleteModal",onDeleted:this.onVueloDeleted,onError:this.showError}),Object(a.jsx)(E,{ref:"editModal",onEdited:this.onVueloEdited,onError:this.showError}),Object(a.jsxs)(m.a,{onClick:this.onInsertClicked,variant:"primary",className:"mt-3",children:[Object(a.jsx)(C.a,{icon:S.f})," Insertar vuelo"]}),Object(a.jsx)(f.a,{children:e}),Object(a.jsx)(f.a,{children:null===i||void 0===i?void 0:i.map((function(e){return Object(a.jsx)(p.a,{md:6,lg:4,children:Object(a.jsxs)("div",{className:"Flight",children:[Object(a.jsxs)("p",{className:"Codigo",children:[Object(a.jsx)(C.a,{icon:S.d}),e.codigo]}),Object(a.jsxs)("p",{className:"Destino",children:[e.origen," ",Object(a.jsx)(C.a,{icon:S.e})," ",e.destino]}),Object(a.jsxs)("p",{className:"Hora",children:[e.fecha," ",Object(a.jsx)(C.a,{icon:S.b})," ",e.hora]}),Object(a.jsxs)("p",{className:"Plazas",children:[e.plazas," plazas ",Object(a.jsx)(C.a,{icon:S.a})," ",e.plazasLibres," disponibles"]}),Object(a.jsxs)(f.a,{children:[Object(a.jsx)(p.a,{children:Object(a.jsxs)(m.a,{onClick:function(n){return t.onEditClicked(e)},variant:"primary",children:[Object(a.jsx)(C.a,{icon:S.c})," Editar"]})}),Object(a.jsx)(p.a,{children:Object(a.jsxs)(m.a,{onClick:function(n){return t.onDeleteClicked(e)},variant:"danger",children:[Object(a.jsx)(C.a,{icon:S.g})," Borrar"]})})]})]})},e.codigo)}))})]}):Object(a.jsx)("div",{children:"Loading..."})}}]),n}(r.a.Component),z=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleSearch=function(e){a.setState({search:e})},a.state={search:null},a}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(v,{onSearch:this.handleSearch}),Object(a.jsx)(w,{search:this.state.search})]})}}]),n}(r.a.Component);i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(z,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.8308d260.chunk.js.map